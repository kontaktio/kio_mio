<div id="<%= dom_id building %>">
  <p>
    <strong>Building:</strong>
    <%= building.kio_building_id %>
  </p>
  <p>
    <strong>Name:</strong>
    <%= building.name %>
  </p>
  <p>
    <strong>Address:</strong>
    <%= building.address %>
  </p>
  <p>
    <strong>Client:</strong>
    <%= link_to building.client.name, building.client %>
  </p>
  <p>
    <strong>Floors:</strong>
    <%= link_to building.floors.size.to_s, floors_path(building.floors) %></td>
</p>
</div>
<script src='https://api.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css' rel='stylesheet' />
<div data-turbolinks="false" style="height:300px; width:100%; background:#000000" id="kiomap"></div>
<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoidGhlYWxleSIsImEiOiJjajhveWV4cDIwYTg3MnFvM28yMm93YmM4In0.1g8ow7OIKJ8J-4LZbYg3Vg';


  const map = new mapboxgl.Map({
    container: 'kiomap',
    style: 'mapbox://styles/mapbox/streets-v12',
    center: [<%= building.lng%>, <%= building.lat %>],
    zoom: 11
  });

  // Create a new marker.
  const marker = new mapboxgl.Marker()
      .setLngLat([<%= building.lng%>, <%= building.lat %>])
      .addTo(map);

  map.addControl(new mapboxgl.NavigationControl());

  map.on('style.load', () => {
  // Insert the layer beneath any symbol layer.
  const layers = map.getStyle().layers;
  const labelLayerId = layers.find(
  (layer) => layer.type === 'symbol' && layer.layout['text-field']
  ).id;


  });
</script>
